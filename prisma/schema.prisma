generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Multi-Tenancy Models
model Organization {
  id                String   @id @default(cuid())
  name              String
  slug              String   @unique
  status            String   @default("ACTIVE")
  subscriptionPlan  String   @default("STARTER")
  contactEmail      String
  defaultCurrency   String   @default("USD")
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  users             User[]
  voyages           Voyage[]
  
  @@map("organizations")
}

model User {
  id              String   @id @default(cuid())
  email           String   @unique
  organizationId  String?
  role            String
  supabaseUserId  String   @unique
  createdAt       DateTime @default(now())
  
  organization    Organization? @relation(fields: [organizationId], references: [id])
  createdVoyages  Voyage[]
  
  @@map("users")
}

// Laytime Domain Models
model Voyage {
  id              String   @id @default(cuid())
  organizationId  String
  vesselName      String
  voyageNumber    String
  status          String   @default("ESTIMATE")
  createdById     String
  createdAt       DateTime @default(now())
  
  organization    Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  createdBy       User         @relation(fields: [createdById], references: [id])
  
  @@map("voyages")
}
